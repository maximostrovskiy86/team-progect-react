(this["webpackJsonpteam-progect-react"]=this["webpackJsonpteam-progect-react"]||[]).push([[1],{16:function(e,t,r){},20:function(e,t,r){},29:function(e,t,r){},4:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return v})),r.d(t,"a",(function(){return O}));var n=r(5),a=r(12),c=r(13),s=r.n(c),i=r(19),u=r(15),o=r.n(u);o.a.defaults.baseURL="https://slimmom-backend.goit.global";var l,j=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},d=Object(a.b)("auth/register",function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/auth/register",t);case 4:return a=e.sent,c=a.data,j(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()),h=Object(a.b)("auth/login",function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/auth/login",t);case 4:return a=e.sent,c=a.data,j(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()),f=Object(a.b)("auth/logout",function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/auth/logout");case 4:b(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()),g=Object(a.b)("auth/refresh",function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,a,c,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.rejectWithValue,a=r.getState,c=a(),null!==(i=c.auth.token)){e.next=5;break}return e.abrupt("return",n());case 5:return j(i),e.prev=6,e.next=9,o.a.get("/auth/refresh");case 9:return u=e.sent,l=u.data,e.abrupt("return",l);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",n(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,r){return e.apply(this,arguments)}}()),O={register:d,logOut:f,logIn:h,refreshCurrentUser:g},p=Object(a.c)({name:"auth",initialState:{user:{username:null,email:null,id:null},token:null,isLoggedIn:!1,isRefreshingUser:!1,error:null},extraReducers:(l={},Object(n.a)(l,O.register.pending,(function(e){e.error=null})),Object(n.a)(l,O.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(n.a)(l,O.register.rejected,(function(e,t){e.error=t.payload})),Object(n.a)(l,O.logIn.pending,(function(e){e.error=null})),Object(n.a)(l,O.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(n.a)(l,O.logIn.rejected,(function(e,t){e.error=t.payload})),Object(n.a)(l,O.logOut.pending,(function(e){e.error=null})),Object(n.a)(l,O.logOut.fulfilled,(function(e){e.user={username:null,email:null},e.token=null,e.isLoggedIn=!1,e.isRefreshingUser=!1})),Object(n.a)(l,O.logOut.rejected,(function(e,t){e.error=t.payload})),Object(n.a)(l,O.refreshCurrentUser.pending,(function(e){e.isRefreshingUser=!0})),Object(n.a)(l,O.refreshCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefreshingUser=!1})),Object(n.a)(l,O.refreshCurrentUser.rejected,(function(e){e.isRefreshingUser=!1})),l)}).reducer,v={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.username},getIsRefreshingUser:function(e){return e.auth.isRefreshingUser}}},42:function(e,t,r){},48:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(21),s=r.n(c),i=(r(48),r(10)),u=r(3),o=r(39),l=r(12),j=r(14),b=r(40),d=r.n(b),h=r(4),f={key:"auth",storage:d.a,whitelist:["user"]},g=Object(l.a)({reducer:{auth:Object(j.g)(f,h.b)},middleware:function(e){return e({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})},devTools:!1}),O=Object(j.h)(g),p=r(11),v=r(24),x=r(2),m=r(1),y=["children","restricted","redirectTo"];function I(e){var t=e.children,r=e.restricted,n=void 0!==r&&r,a=e.redirectTo,c=void 0===a?"/":a,s=Object(v.a)(e,y),i=Object(u.c)(h.c.getIsLoggedIn)&&n;return Object(m.jsx)(x.b,Object(p.a)(Object(p.a)({},s),{},{children:i?Object(m.jsx)(x.a,{to:c}):t}))}var k=["children","redirectTo"];function N(e){var t=e.children,r=e.redirectTo,n=void 0===r?"/":r,a=Object(v.a)(e,k),c=Object(u.c)(h.c.getIsLoggedIn);return Object(m.jsx)(x.b,Object(p.a)(Object(p.a)({},a),{},{children:c?t:Object(m.jsx)(x.a,{to:n})}))}var U=r(20),w=r.n(U),C=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.b,{className:w.a.nav,activeClassName:w.a.activeNav,to:"/login",exact:!0,children:"\u0412\u0445\u043e\u0434"}),Object(m.jsx)(i.b,{className:w.a.nav,activeClassName:w.a.activeNav,to:"/register",exact:!0,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})},L=r(16),R=r.n(L),z=function(){var e=Object(u.c)(h.c.getIsLoggedIn);return Object(m.jsxs)("nav",{children:[Object(m.jsx)(i.b,{className:R.a.nav,activeClassName:R.a.activeNav,to:"/",exact:!0,children:"Home"}),e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.b,{className:R.a.nav,activeClassName:R.a.activeNav,to:"/diary",exact:!0,children:"\u0414\u043d\u0435\u0432\u043d\u0438\u043a"}),Object(m.jsx)(i.b,{className:R.a.nav,activeClassName:R.a.activeNav,to:"/calculator",exact:!0,children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"})]})]})},T=r(29),W=r.n(T),S=function(){var e=Object(u.b)();return Object(m.jsx)("div",{className:W.a.userWrapper,children:Object(m.jsx)("button",{className:W.a.logBtn,type:"button",onClick:function(){e(h.a.logOut())},children:"logout"})})},V=r(42),A=r.n(V);function B(){var e=Object(u.c)(h.c.getIsLoggedIn);return Object(m.jsxs)("header",{className:A.a.headerWrapper,children:[Object(m.jsx)(z,{})," ",e?Object(m.jsx)(S,{}):Object(m.jsx)(C,{})]})}var F=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(8),r.e(4)]).then(r.bind(null,97))})),E=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,98))})),J=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,99))})),P=Object(n.lazy)((function(){return r.e(9).then(r.bind(null,95))})),H=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,96))}));function M(){var e=Object(u.b)(),t=Object(u.c)(h.c.getIsRefreshingUser);return Object(n.useEffect)((function(){e(h.a.refreshCurrentUser())}),[e]),!t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(B,{}),Object(m.jsx)(x.d,{children:Object(m.jsxs)(n.Suspense,{fallback:Object(m.jsx)("div",{children:"loader"}),children:[Object(m.jsx)(I,{exact:!0,path:"/",children:Object(m.jsx)(F,{})}),Object(m.jsx)(I,{path:"/register",restricted:!0,children:Object(m.jsx)(E,{})}),Object(m.jsx)(I,{path:"/login",restricted:!0,redirectTo:"/diary",children:Object(m.jsx)(J,{})}),Object(m.jsx)(N,{path:"/diary",restricted:!0,redirectTo:"/login",children:Object(m.jsx)(P,{})}),Object(m.jsx)(N,{path:"/calculator",restricted:!0,redirectTo:"/login",children:Object(m.jsx)(H,{})}),Object(m.jsx)(x.a,{to:"/"})]})})]})}s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(u.a,{store:g,children:Object(m.jsx)(o.a,{loading:Object(m.jsx)("h2",{children:"...loading"}),persistor:O,children:Object(m.jsx)(i.a,{children:Object(m.jsx)(M,{})})})})}),document.getElementById("root"))}},[[79,2,3]]]);
//# sourceMappingURL=main.b0e101e9.chunk.js.map